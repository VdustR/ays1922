{"version":3,"sources":["utils/escape.ts","Template.tsx","v1/en.jpeg","v1/zh.jpeg","v2/zh.jpeg","App.tsx","index.tsx"],"names":["escapeHtml","html","text","document","createTextNode","p","createElement","appendChild","innerHTML","cssFrame","css","cssBgFrame","cssBg","cssQrCode","cssShopCode","cssSmsText","cssCount","App","img","classNameQrCode","classNameShopCode","classNameSmsText","classNameCount","history","useHistory","cleanLocationCode","useParams","locationCode","useEffect","length","alert","replace","useMemo","chunk","split","map","arr","join","fill","smsText","outFileName","useState","url","setUrl","cancel","QRCode","toDataURL","then","createMarkup","__html","className","onClick","e","toBlob","currentTarget","pixelRatio","blob","saveAs","cx","src","alt","dangerouslySetInnerHTML","undefined","children","style","color","Link","link","title","target","rel","to","Home","displayLocationCode","href","value","onChange","str","maxLength","placeholder","autoFocus","Redirect","basename","process","exact","sensitive","path","component","Template","v1Zh","v1En","v2Zh","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.b5b60818.chunk.js","sourcesContent":["const escapeHtml = (html: string) => {\n  var text = document.createTextNode(html);\n  var p = document.createElement(\"p\");\n  p.appendChild(text);\n  return p.innerHTML;\n};\n\nexport default escapeHtml;\n","import { css, cx } from \"@emotion/css\";\nimport { saveAs } from \"file-saver\";\nimport { toBlob } from \"html-to-image\";\nimport chunk from \"lodash/chunk\";\nimport QRCode from \"qrcode\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport escapeHtml from \"utils/escape\";\n\nconst cssFrame = css`\n  label: cssFrame;\n  position: relative;\n`;\n\nconst cssBgFrame = css`\n  label: BgFrame;\n  width: fit-content;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  margin-right: auto;\n  margin-top: 0px;\n`;\n\nconst cssBg = css`\n  label: Bg;\n  /* height: 842px; */\n  width: 930px;\n  padding: 0;\n  margin-left: auto;\n  margin-right: auto;\n  z-index: 1;\n`;\n\nconst cssQrCode = css`\n  label: QrCode;\n  width: 300px;\n  height: 300px;\n  position: absolute;\n  top: 620px;\n  left: 155px;\n  z-index: 11;\n`;\n\nconst cssShopCode = css`\n  label: ShopCode;\n  position: absolute;\n  top: 990px;\n  left: 125px;\n  z-index: 11;\n  font-family: \"Courier New\", Courier, monospace;\n  font-size: 28px;\n  font-weight: 800;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  width: 360px;\n  height: 57px;\n\n  outline: none;\n  border: 0;\n  padding: 0;\n  background: none;\n`;\n\nconst cssSmsText = css`\n  label: SmsText;\n  background: white;\n  position: absolute;\n  top: 621px;\n  left: 619px;\n  z-index: 11;\n  font-size: 10px;\n  font-weight: 800;\n  line-height: 1.5em;\n  letter-spacing: 1px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  text-align: left;\n  width: 181px;\n  height: 55px;\n  /* border: 1px solid red; */\n`;\n\nconst cssCount = css`\n  label: Count;\n  background: #fff;\n  position: absolute;\n  text-align: right;\n  padding: 2px;\n  top: 639px;\n  left: 800px;\n  font-size: 9px;\n  width: 26px;\n  height: 12px;\n  color: #d0d0d0;\n  z-index: 2;\n`;\n\nconst message = \"本簡訊是簡訊實聯制發送，限防疫目的使用。\";\n\nexport type AppProps = {\n  img: string;\n  classNameQrCode?: string;\n  classNameShopCode?: string;\n  classNameSmsText?: string;\n  classNameCount?: string;\n};\n\nfunction App({\n  img,\n  classNameQrCode,\n  classNameShopCode,\n  classNameSmsText,\n  classNameCount,\n}: AppProps) {\n  const history = useHistory();\n  const { locationCode: cleanLocationCode } =\n    useParams<{ locationCode: string }>();\n  useEffect(() => {\n    if (cleanLocationCode.length !== 15) {\n      alert(\"請輸入正確的場所代碼\");\n      history.replace(\"/\");\n    }\n  }, [cleanLocationCode.length, history]);\n  const locationCode = useMemo(\n    () =>\n      chunk(cleanLocationCode.replace(/\\s/g, \"\").split(\"\"), 4)\n        .map((arr) => arr.join(\"\"))\n        .join(\" \"),\n    [cleanLocationCode]\n  );\n  const fill = locationCode.length === 18;\n  const smsText = useMemo(\n    () => (fill ? `場所代碼: ${locationCode}\\n${message}` : \"\"),\n    [fill, locationCode]\n  );\n  const outFileName = useMemo(\n    () => (fill ? `ays1922_${locationCode.split(\" \").join(\"-\")}.png` : \"\"),\n    [fill, locationCode]\n  );\n  const [url, setUrl] = useState(\"\");\n  useEffect(() => {\n    if (!fill) {\n      setUrl(\"\");\n      return;\n    }\n    let cancel = false;\n    QRCode.toDataURL(`smsto:1922:${smsText}`).then((url) => {\n      if (cancel) return;\n      setUrl(url);\n    });\n    return () => {\n      cancel = true;\n    };\n  }, [fill, locationCode, smsText]);\n  const createMarkup = useMemo(() => {\n    if (!fill) return undefined;\n    return () => ({\n      __html: smsText.split(\"\\n\").map(escapeHtml).join(\"<br/>\"),\n    });\n  }, [fill, smsText]);\n  return (\n    <div\n      className={cssFrame}\n      onClick={(e) => {\n        if (!fill) return;\n        toBlob(e.currentTarget, { pixelRatio: 1.5 }).then(function (blob) {\n          if (!blob) {\n            alert(\"Blob missing\");\n            return;\n          }\n          saveAs(blob, outFileName);\n          // history.replace(`/h/${cleanLocationCode}`);\n        });\n      }}\n    >\n      <div className={cssBgFrame}>\n        {url ? (\n          <img className={cx(cssQrCode, classNameQrCode)} src={url} alt=\"\" />\n        ) : null}\n      </div>\n      <div className={cx(cssCount, classNameCount)}>{smsText.length}/70</div>\n      <div className={cx(cssShopCode, classNameShopCode)}>{locationCode}</div>\n      {/* eslint-disable-next-line react/no-danger-with-children */}\n      <div\n        className={cx(cssSmsText, classNameSmsText)}\n        dangerouslySetInnerHTML={createMarkup ? createMarkup() : undefined}\n        children={\n          createMarkup ? undefined : (\n            <span style={{ color: \"red\" }}>請先輸入場所代碼</span>\n          )\n        }\n      />\n      <div className={cssBgFrame}>\n        <img className={cssBg} src={img} alt=\"\" />\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","export default __webpack_public_path__ + \"static/media/en.55753495.jpeg\";","export default __webpack_public_path__ + \"static/media/zh.d68bbc57.jpeg\";","export default __webpack_public_path__ + \"static/media/zh.2c3963f3.jpeg\";","import { css } from \"@emotion/css\";\nimport chunk from \"lodash/chunk\";\nimport { Fragment, useEffect, useMemo } from \"react\";\nimport {\n  BrowserRouter,\n  NavLink,\n  Route,\n  Switch,\n  useHistory,\n  useParams,\n} from \"react-router-dom\";\nimport Template from \"./Template\";\nimport v1En from \"./v1/en.jpeg\";\nimport v1Zh from \"./v1/zh.jpeg\";\nimport v2Zh from \"./v2/zh.jpeg\";\n\nfunction Link({ link, title }: { link: string; title: string }) {\n  return (\n    <li>\n      <NavLink target=\"_blank\" rel=\"noopener noreferrer\" to={link}>\n        {title}\n      </NavLink>\n    </li>\n  );\n}\n\nfunction Home() {\n  const history = useHistory();\n  const { locationCode = \"\" } = useParams<{ locationCode: string }>();\n  const displayLocationCode = useMemo(\n    () =>\n      chunk(locationCode.replace(/\\s/g, \"\").split(\"\"), 4)\n        .map((arr) => arr.join(\"\"))\n        .join(\" \"),\n    [locationCode]\n  );\n  const cleanLocationCode = useMemo(\n    () => locationCode.replace(/\\s/g, \"\"),\n    [locationCode]\n  );\n  const fill = displayLocationCode.length === 18;\n  return (\n    <div\n      className={css`\n        padding: 1em;\n        max-width: 500px;\n        margin-left: 2em;\n        margin-right: auto;\n      `}\n    >\n      <h1>AnonYmouS 1922 簡訊實聯制海報產生器</h1>\n      <a\n        href=\"https://github.com/VdustR/ays1922#readme\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        軟體簡介\n      </a>\n      <h2>操作步驟</h2>\n      <ol>\n        <li>\n          {\"輸入\"}\n          <a\n            href=\"https://www.facebook.com/ey.gov.tw/posts/4480266808667830\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            {\"場所代碼\"}\n          </a>\n          {\": \"}\n          <input\n            value={displayLocationCode}\n            onChange={(e) => {\n              const str = e.target.value.replace(/\\s/g, \"\");\n              history.replace(`/h/${str}`);\n            }}\n            maxLength={18}\n            placeholder=\"XXXX XXXX XXXX XXX\"\n            autoFocus\n          />\n        </li>\n        {fill ? (\n          <li>\n            {\"選擇模板後列印\"}\n            <div\n              className={css`\n                font-size: 0.8em;\n              `}\n            >\n              或是左鍵點擊海報可以另存圖片(可能會延遲 2~3 秒)\n            </div>\n            <ul>\n              <Link title=\"v2 - 中文\" link={`/v2/zh/${cleanLocationCode}`} />\n              <li>\n                <NavLink\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  to={`/v1/zh/${cleanLocationCode}`}\n                >\n                  v1 - 中文\n                </NavLink>\n              </li>\n              <li>\n                <NavLink\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  to={`/v1/en/${cleanLocationCode}`}\n                >\n                  v1 - 英文\n                </NavLink>\n              </li>\n            </ul>\n            <h4>列印快捷鍵:</h4>\n            <ul>\n              <li>\n                Mac: <kbd>⌘</kbd> + <kbd>p</kbd>\n              </li>\n              <li>\n                Windows & Linux: <kbd>Ctrl</kbd> + <kbd>p</kbd>\n              </li>\n            </ul>\n          </li>\n        ) : (\n          <li\n            className={css`\n              color: red;\n            `}\n          >\n            請先輸入正確的場所代碼\n          </li>\n        )}\n      </ol>\n    </div>\n  );\n}\n\nfunction Redirect() {\n  const history = useHistory();\n  useEffect(() => {\n    history.replace(\"/h\");\n  }, [history]);\n  return <Fragment />;\n}\n\nfunction App() {\n  return (\n    <BrowserRouter basename={process.env.PUBLIC_URL}>\n      <Switch>\n        <Route exact sensitive path=\"/\" component={Redirect} />\n        <Route exact sensitive path=\"/h/:locationCode?\" component={Home} />\n        <Route exact sensitive path=\"/v1/zh/:locationCode\">\n          <Template img={v1Zh} />\n        </Route>\n        <Route exact sensitive path=\"/v1/en/:locationCode\">\n          <Template\n            img={v1En}\n            classNameQrCode={css`\n              top: 614px;\n              left: 140px;\n            `}\n            classNameSmsText={css`\n              top: 594px;\n            `}\n            classNameCount={css`\n              top: 613px;\n            `}\n            classNameShopCode={css`\n              top: 979px;\n              left: 111px;\n              width: 361px;\n              height: 55px;\n            `}\n          />\n        </Route>\n        <Route exact sensitive path=\"/v2/zh/:locationCode\">\n          <Template\n            img={v2Zh}\n            classNameQrCode={css`\n              width: 193px;\n              height: 193px;\n              top: 573px;\n              left: 369px;\n            `}\n            classNameSmsText={css`\n              top: 998px;\n              left: 67px;\n              width: 164px;\n              height: 47px;\n            `}\n            classNameCount={css`\n              top: 1011px;\n              left: 226px;\n            `}\n            classNameShopCode={css`\n              top: 801px;\n              left: 336px;\n              width: 260px;\n              height: 37px;\n              font-size: 20px;\n            `}\n          />\n        </Route>\n        <Route path=\"/\">NOT FOUND!</Route>\n      </Switch>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./fonts/fonts.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}