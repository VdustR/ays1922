{"version":3,"sources":["utils/escape.ts","Template.tsx","v1/en.jpeg","v1/zh.jpeg","v2/zh.jpeg","App.tsx","index.tsx"],"names":["escapeHtml","html","text","document","createTextNode","p","createElement","appendChild","innerHTML","cssFrame","css","cssBgFrame","cssBg","cssQrCode","cssShopCode","cssSmsText","cssCount","App","img","classNameQrCode","classNameShopCode","classNameSmsText","classNameCount","refEl","useRef","useState","locationCode","setLocationCode","fill","length","smsText","useMemo","url","setUrl","useEffect","cancel","QRCode","toDataURL","then","createMarkup","__html","split","map","join","className","ref","cx","src","alt","value","onChange","e","str","chunk","target","replace","arr","onBlur","code","trim","onKeyPress","current","key","domtoimage","toBlob","blob","saveAs","maxLength","placeholder","autoFocus","dangerouslySetInnerHTML","undefined","children","style","color","Home","href","rel","to","basename","process","exact","sensitive","path","component","Template","v1Zh","v1En","v2Zh","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.fc57eb30.chunk.js","sourcesContent":["const escapeHtml = (html: string) => {\n  var text = document.createTextNode(html);\n  var p = document.createElement(\"p\");\n  p.appendChild(text);\n  return p.innerHTML;\n};\n\nexport default escapeHtml;\n","import { css, cx } from \"@emotion/css\";\nimport domtoimage from \"dom-to-image\";\nimport { saveAs } from \"file-saver\";\nimport chunk from \"lodash/chunk\";\nimport QRCode from \"qrcode\";\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport escapeHtml from \"utils/escape\";\n\nconst cssFrame = css`\n  label: cssFrame;\n  position: relative;\n`;\n\nconst cssBgFrame = css`\n  label: BgFrame;\n  width: fit-content;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  margin-left: auto;\n  margin-right: auto;\n  margin-top: 0px;\n`;\n\nconst cssBg = css`\n  label: Bg;\n  /* height: 842px; */\n  width: 930px;\n  padding: 0;\n  margin-left: auto;\n  margin-right: auto;\n  z-index: 1;\n`;\n\nconst cssQrCode = css`\n  label: QrCode;\n  width: 300px;\n  height: 300px;\n  position: absolute;\n  top: 620px;\n  left: 155px;\n  z-index: 11;\n`;\n\nconst cssShopCode = css`\n  label: ShopCode;\n  position: absolute;\n  top: 990px;\n  left: 125px;\n  z-index: 11;\n  font-family: \"Courier New\", Courier, monospace;\n  font-size: 28px;\n  font-weight: 800;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  width: 360px;\n  height: 57px;\n\n  outline: none;\n  border: 0;\n  padding: 0;\n  background: none;\n`;\n\nconst cssSmsText = css`\n  label: SmsText;\n  background: white;\n  position: absolute;\n  top: 621px;\n  left: 619px;\n  z-index: 11;\n  font-size: 10px;\n  font-weight: 800;\n  line-height: 1.5em;\n  letter-spacing: 1px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  text-align: left;\n  width: 181px;\n  height: 55px;\n  /* border: 1px solid red; */\n`;\n\nconst cssCount = css`\n  label: Count;\n  background: #fff;\n  position: absolute;\n  text-align: right;\n  padding: 2px;\n  top: 639px;\n  left: 800px;\n  font-size: 9px;\n  width: 26px;\n  height: 12px;\n  color: #d0d0d0;\n  z-index: 2;\n`;\n\nconst message = \"本簡訊是簡訊實聯制發送，限防疫目的使用。\";\n\nexport type AppProps = {\n  img: string;\n  classNameQrCode?: string;\n  classNameShopCode?: string;\n  classNameSmsText?: string;\n  classNameCount?: string;\n};\n\nfunction App({\n  img,\n  classNameQrCode,\n  classNameShopCode,\n  classNameSmsText,\n  classNameCount,\n}: AppProps) {\n  const refEl = useRef<HTMLDivElement | null>(null);\n  const [locationCode, setLocationCode] = useState(\"\");\n  const fill = locationCode.length === 18;\n  const smsText = useMemo(\n    () => (fill ? `場所代碼: ${locationCode}\\n${message}` : \"\"),\n    [fill, locationCode]\n  );\n  const [url, setUrl] = useState(\"\");\n  useEffect(() => {\n    if (!fill) {\n      setUrl(\"\");\n      return;\n    }\n    let cancel = false;\n    QRCode.toDataURL(`smsto:1922:${smsText}`).then((url) => {\n      if (cancel) return;\n      setUrl(url);\n    });\n    return () => {\n      cancel = true;\n    };\n  }, [fill, locationCode, smsText]);\n  const createMarkup = useMemo(() => {\n    if (!fill) return undefined;\n    return () => ({\n      __html: smsText.split(\"\\n\").map(escapeHtml).join(\"<br/>\"),\n    });\n  }, [fill, smsText]);\n  return (\n    <div className={cssFrame} ref={refEl}>\n      <div className={cssBgFrame}>\n        {url ? (\n          <img className={cx(cssQrCode, classNameQrCode)} src={url} alt=\"\" />\n        ) : null}\n      </div>\n      <div className={cx(cssCount, classNameCount)}>{smsText.length}/70</div>\n      <input\n        className={cx(cssShopCode, classNameShopCode)}\n        value={locationCode}\n        onChange={(e) => {\n          const str = chunk(e.target.value.replace(/\\s/g, \"\").split(\"\"), 4)\n            .map((arr) => arr.join(\"\"))\n            .join(\" \");\n          setLocationCode(str);\n        }}\n        onBlur={() => {\n          setLocationCode((code) => code.trim());\n        }}\n        onKeyPress={(e) => {\n          if (!fill || !refEl.current || e.key !== \"Enter\") return;\n          domtoimage.toBlob(refEl.current).then(function (blob) {\n            saveAs(blob, \"sms-real-name.png\");\n          });\n        }}\n        maxLength={18}\n        placeholder=\"請由此輸入\"\n        autoFocus\n      />\n      {/* eslint-disable-next-line react/no-danger-with-children */}\n      <div\n        className={cx(cssSmsText, classNameSmsText)}\n        dangerouslySetInnerHTML={createMarkup ? createMarkup() : undefined}\n        children={\n          createMarkup ? undefined : (\n            <span style={{ color: \"red\" }}>請先輸入場所代碼</span>\n          )\n        }\n      />\n      <div className={cssBgFrame}>\n        <img className={cssBg} src={img} alt=\"\" />\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","export default __webpack_public_path__ + \"static/media/en.55753495.jpeg\";","export default __webpack_public_path__ + \"static/media/zh.d68bbc57.jpeg\";","export default __webpack_public_path__ + \"static/media/zh.2c3963f3.jpeg\";","import { css } from \"@emotion/css\";\nimport { BrowserRouter, NavLink, Route, Switch } from \"react-router-dom\";\nimport Template from \"./Template\";\nimport v1En from \"./v1/en.jpeg\";\nimport v1Zh from \"./v1/zh.jpeg\";\nimport v2Zh from \"./v2/zh.jpeg\";\n\nfunction Home() {\n  return (\n    <>\n      <h1>AnonYmouS 1922 簡訊實聯制海報產生器</h1>\n      <ul>\n        <li>\n          <a\n            href=\"https://github.com/VdustR/ays1922#readme\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            介紹\n          </a>\n        </li>\n        <li>\n          <NavLink target=\"_blank\" rel=\"noopener noreferrer\" to=\"/v2/zh\">\n            v2 - 中文\n          </NavLink>\n        </li>\n        <li>\n          <NavLink target=\"_blank\" rel=\"noopener noreferrer\" to=\"/v1/zh\">\n            v1 - 中文\n          </NavLink>\n        </li>\n        <li>\n          <NavLink target=\"_blank\" rel=\"noopener noreferrer\" to=\"/v1/en\">\n            v1 - 英文\n          </NavLink>\n        </li>\n      </ul>\n    </>\n  );\n}\n\nfunction App() {\n  return (\n    <BrowserRouter basename={process.env.PUBLIC_URL}>\n      <Switch>\n        <Route exact sensitive path=\"/\" component={Home} />\n        <Route exact sensitive path=\"/v1/zh\">\n          <Template img={v1Zh} />\n        </Route>\n        <Route exact sensitive path=\"/v1/en\">\n          <Template\n            img={v1En}\n            classNameQrCode={css`\n              top: 614px;\n              left: 140px;\n            `}\n            classNameSmsText={css`\n              top: 594px;\n            `}\n            classNameCount={css`\n              top: 613px;\n            `}\n            classNameShopCode={css`\n              top: 979px;\n              left: 111px;\n              width: 361px;\n              height: 55px;\n            `}\n          />\n        </Route>\n        <Route exact sensitive path=\"/v2/zh\">\n          <Template\n            img={v2Zh}\n            classNameQrCode={css`\n              width: 193px;\n              height: 193px;\n              top: 573px;\n              left: 369px;\n            `}\n            classNameSmsText={css`\n              top: 998px;\n              left: 67px;\n              width: 164px;\n              height: 47px;\n            `}\n            classNameCount={css`\n              top: 1011px;\n              left: 226px;\n            `}\n            classNameShopCode={css`\n              top: 801px;\n              left: 336px;\n              width: 260px;\n              height: 37px;\n              font-size: 20px;\n            `}\n          />\n        </Route>\n        <Route path=\"/\">NOT FOUND!</Route>\n      </Switch>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./fonts/fonts.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}